{% extends "base.html" %}
{% block content %}
<h2>Student Details</h2>
<p><strong>Name:</strong> {{ s.name }}</p>
<p><strong>Roll Number:</strong> {{ s.roll_number }}</p>

<h3>Grades</h3>
<table>
  <thead><tr><th>Subject</th><th>Score</th></tr></thead>
  <tbody>
    {% for subject, score in s.grades_dict.items() %}
      <tr><td>{{ subject }}</td><td>{{ score }}</td></tr>
    {% else %}
      <tr><td colspan="2">No grades yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

{% if s.average() is not none %}
  <p><strong>Average:</strong> {{ '%.2f'|format(s.average()) }}</p>
  <p><a href="{{ url_for('average', roll=s.roll_number) }}">Recalculate Average</a></p>
{% endif %}

<div style="margin-top: 20px;">
  <form method="POST" action="{{ url_for('delete_student', roll=s.roll_number) }}" style="display:inline;" 
        onsubmit="return confirm('Are you sure you want to delete student {{ s.name }} ({{ s.roll_number }})? This will also delete all their grades.')">
    <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-right: 10px;">Delete Student</button>
  </form>
  <a href="{{ url_for('students') }}" style="text-decoration: none; background-color: #6c757d; color: white; padding: 8px 16px; border-radius: 4px;">Back to Students</a>
</div>
{% endblock %}
